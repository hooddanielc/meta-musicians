From 6d86d9c96c01eb74591c83e3f09bfaf46bca445f Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Andreas=20M=C3=BCller?= <schnitzeltony@gmail.com>
Date: Wed, 3 Apr 2019 21:17:30 +0200
Subject: [PATCH] Use POSIX conform location for errno.h
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

On its POSIX-correctness crusade musl spits out a warning which ends as error:

| In file included from /home/superandy/tmp/oe-core-musl/work/cortexa7t2hf-neon-vfpv4-mortsgna-linux-musleabi/csound/6.12-r0/git/Opcodes/linuxjoystick.c:39:
| /home/superandy/tmp/oe-core-musl/work/cortexa7t2hf-neon-vfpv4-mortsgna-linux-musleabi/csound/6.12-r0/recipe-sysroot/usr/include/sys/errno.h:1:2: error: #warning redirecting incorrect #include <sys/errno.h> to <errno.h> [-Werror=cpp]
|  #warning redirecting incorrect #include <sys/errno.h> to <errno.h>
|   ^~~~~~~
| cc1: all warnings being treated as errors

Yes that is 'correct' [1] as musl claims itself [2] but...

[1] http://pubs.opengroup.org/onlinepubs/000095399/basedefs/errno.h.html
[2] https://www.musl-libc.org/

Upstream-Status: Applied [3]

[3] https://github.com/csound/csound/commit/38da4f1c1d93377d3ff90e15be8998f9408faf34

Signed-off-by: Andreas MÃ¼ller <schnitzeltony@gmail.com>
---
 Opcodes/linuxjoystick.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/Opcodes/linuxjoystick.c b/Opcodes/linuxjoystick.c
index 348f49168..a56ad18e3 100644
--- a/Opcodes/linuxjoystick.c
+++ b/Opcodes/linuxjoystick.c
@@ -36,7 +36,7 @@
 */
 
 #include "linuxjoystick.h"
-#include <sys/errno.h>
+#include <errno.h>
 
 static int32_t linuxjoystick (CSOUND *csound, LINUXJOYSTICK *stick)
 {
-- 
2.20.1

